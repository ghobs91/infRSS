{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewg/Projects/infrss/src/components/ui/card.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface CardProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nexport const Card: React.FC<CardProps> = ({ className, children, ...props }) => {\n  return (\n    <div\n      className={` border border-gray-800 rounded-2xl shadow p-4 ${className}`}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n};\n\ninterface CardContentProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nexport const CardContent: React.FC<CardContentProps> = ({ className, children, ...props }) => {\n  return (\n    <div className={`space-y-1 ${className}`} {...props}>\n      {children}\n    </div>\n  );\n};"],"names":[],"mappings":";;;;;;AAIO,MAAM,OAA4B,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;IACzE,qBACE,8OAAC;QACC,WAAW,CAAC,+CAA+C,EAAE,WAAW;QACvE,GAAG,KAAK;kBAER;;;;;;AAGP;AAIO,MAAM,cAA0C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;IACvF,qBACE,8OAAC;QAAI,WAAW,CAAC,UAAU,EAAE,WAAW;QAAG,GAAG,KAAK;kBAChD;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewg/Projects/infrss/src/components/ui/button.tsx"],"sourcesContent":["interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: \"default\" | \"destructive\";\n}\n\nexport const Button: React.FC<ButtonProps> = ({ className = \"\", variant = \"default\", children, ...props }) => {\n  const base = \"font-semibold px-4 py-2 rounded-xl shadow-sm transition-colors\";\n  const variants = {\n    default: \"bg-blue-600 hover:bg-blue-700 text-white\",\n    destructive: \"bg-red-600 hover:bg-red-700 text-white\",\n  };\n\n  return (\n    <button\n      className={`${base} ${variants[variant]} ${className}`}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n};\n"],"names":[],"mappings":";;;;;AAIO,MAAM,SAAgC,CAAC,EAAE,YAAY,EAAE,EAAE,UAAU,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;IACvG,MAAM,OAAO;IACb,MAAM,WAAW;QACf,SAAS;QACT,aAAa;IACf;IAEA,qBACE,8OAAC;QACC,WAAW,GAAG,KAAK,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW;QACrD,GAAG,KAAK;kBAER;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewg/Projects/infrss/src/lib/rssUtils.ts"],"sourcesContent":["// lib/rssUtils.ts\n\ninterface FeedData {\n  title: string;\n  url: string;\n}\n\ninterface Article {\n  title: string;\n  link: string;\n  pubDate: string;\n  thumbnail?: string;\n  sourceDomain: string;\n}\n\nexport async function getFeedUrlFromHtml(siteUrl: string): Promise<string | null> {\n  try {\n    const res = await fetchWithCors(siteUrl);\n    const html = await res.text();\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n    const linkEl = doc.querySelector('link[type=\"application/rss+xml\"], link[rel=\"alternate\"][type=\"application/rss+xml\"]');\n    if (linkEl && linkEl.getAttribute(\"href\")) {\n      const href = linkEl.getAttribute(\"href\")!;\n      const url = new URL(href, siteUrl);\n      return url.toString();\n    }\n    return null;\n  } catch (err) {\n    console.error(\"Failed to resolve feed URL:\", err);\n    return null;\n  }\n}\n\nexport async function fetchAndParseRSS(feedUrl: string): Promise<{ title: string; items: Article[] } | null> {\n  try {\n    const res = await fetchWithCors(feedUrl);\n    const text = await res.text();\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(text, \"application/xml\");\n\n    const title = doc.querySelector(\"channel > title\")?.textContent || \"Untitled Feed\";\n    const items: Article[] = [];\n\n    doc.querySelectorAll(\"item\").forEach((item) => {\n      const title = item.querySelector(\"title\")?.textContent || \"(No title)\";\n      const link = item.querySelector(\"link\")?.textContent || \"\";\n      const pubDate = item.querySelector(\"pubDate\")?.textContent || \"\";\n\n      // Extended thumbnail logic\n      let thumbnail: string | undefined;\n\n      const mediaThumb = item.querySelector(\"media\\\\:thumbnail\");\n      const mediaContent = item.querySelector(\"media\\\\:content\");\n      const enclosure = item.querySelector(\"enclosure\");\n\n      if (mediaThumb?.getAttribute(\"url\")) {\n        thumbnail = mediaThumb.getAttribute(\"url\") || undefined;\n      } else if (mediaContent?.getAttribute(\"url\")?.includes(\"image\")) {\n        thumbnail = mediaContent.getAttribute(\"url\") || undefined;\n      } else if (enclosure?.getAttribute(\"type\")?.startsWith(\"image\")) {\n        thumbnail = enclosure.getAttribute(\"url\") || undefined;\n      } else {\n        const desc = item.querySelector(\"description\")?.textContent || \"\";\n        const content = item.querySelector(\"content\\\\:encoded\")?.textContent || \"\";\n        const combined = desc + content;\n        const match = combined.match(/<img[^>]+src=[\"']([^\"']+)[\"']/);\n        if (match) thumbnail = match[1];\n      }\n\n      let sourceDomain = \"\";\n      try {\n        sourceDomain = link ? new URL(link).hostname.replace(\"www.\", \"\") : \"\";\n      } catch {\n        console.warn(\"Invalid article link:\", link);\n      }\n\n      items.push({ title, link, pubDate, thumbnail, sourceDomain });\n    });\n\n    return { title, items };\n  } catch (err) {\n    console.error(\"Failed to fetch or parse RSS:\", err);\n    return null;\n  }\n}\n\nexport const fetchWithCors = async (url: string): Promise<Response> => {\n  return fetch(`/api/proxy?url=${encodeURIComponent(url)}`);\n};\n\nexport function saveFeedToStorage(feed: FeedData) {\n  const stored = localStorage.getItem(\"feeds\");\n  const current: FeedData[] = stored ? JSON.parse(stored) : [];\n  if (!current.find((f) => f.url === feed.url)) {\n    const updated = [...current, feed];\n    localStorage.setItem(\"feeds\", JSON.stringify(updated));\n  }\n}\n\nexport function loadFeedsFromStorage(): FeedData[] {\n  const stored = localStorage.getItem(\"feeds\");\n  return stored ? JSON.parse(stored) : [];\n}\n\nexport function removeFeedFromStorage(url: string) {\n  const stored = localStorage.getItem(\"feeds\");\n  const current: FeedData[] = stored ? JSON.parse(stored) : [];\n  const updated = current.filter((feed) => feed.url !== url);\n  localStorage.setItem(\"feeds\", JSON.stringify(updated));\n}\n\nexport type { FeedData, Article };\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewg/Projects/infrss/src/app/manage/page.tsx"],"sourcesContent":["// app/manage/page.tsx\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { removeFeedFromStorage, loadFeedsFromStorage, type FeedData } from \"@/lib/rssUtils\";\n\nexport default function ManageSubscriptionsPage() {\n  const [feeds, setFeeds] = useState<FeedData[]>([]);\n\n  useEffect(() => {\n    setFeeds(loadFeedsFromStorage());\n  }, []);\n\n  const removeFeed = (urlToRemove: string) => {\n    removeFeedFromStorage(urlToRemove);\n    setFeeds((prev) => prev.filter((feed) => feed.url !== urlToRemove));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-2xl font-semibold text-gray-800\">Manage Subscriptions</h2>\n      {feeds.length === 0 ? (\n        <p className=\"text-gray-500\">You have no saved feeds.</p>\n      ) : (\n        feeds.map((feed) => {\n          const domain = new URL(feed.url).hostname.replace(\"www.\", \"\");\n          return (\n            <Card\n              key={feed.url}\n              className=\"border border-gray-800 shadow-sm flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\"\n            >\n              <CardContent className=\"flex-1 p-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <img\n                    src={`https://www.google.com/s2/favicons?sz=16&domain_url=${feed.url}`}\n                    className=\"w-4 h-4\"\n                    alt=\"favicon\"\n                  />\n                  <p className=\"text-sm text-gray-500\">{domain}</p>\n                </div>\n                <p className=\"font-medium text-gray-800 break-words\">{feed.title}</p>\n                <p className=\"text-sm text-gray-500 break-all\">{feed.url}</p>\n              </CardContent>\n              <div className=\"px-4 pb-4 sm:pb-0\">\n                <Button onClick={() => removeFeed(feed.url)} variant=\"destructive\">\n                  Remove\n                </Button>\n              </div>\n            </Card>\n          );\n        })\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,sBAAsB;;;;;AAGtB;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IAEjD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,SAAS,CAAA,GAAA,sHAAA,CAAA,uBAAoB,AAAD;IAC9B,GAAG,EAAE;IAEL,MAAM,aAAa,CAAC;QAClB,CAAA,GAAA,sHAAA,CAAA,wBAAqB,AAAD,EAAE;QACtB,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,GAAG,KAAK;IACxD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAuC;;;;;;YACpD,MAAM,MAAM,KAAK,kBAChB,8OAAC;gBAAE,WAAU;0BAAgB;;;;;uBAE7B,MAAM,GAAG,CAAC,CAAC;gBACT,MAAM,SAAS,IAAI,IAAI,KAAK,GAAG,EAAE,QAAQ,CAAC,OAAO,CAAC,QAAQ;gBAC1D,qBACE,8OAAC,gIAAA,CAAA,OAAI;oBAEH,WAAU;;sCAEV,8OAAC,gIAAA,CAAA,cAAW;4BAAC,WAAU;;8CACrB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,KAAK,CAAC,oDAAoD,EAAE,KAAK,GAAG,EAAE;4CACtE,WAAU;4CACV,KAAI;;;;;;sDAEN,8OAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;8CAExC,8OAAC;oCAAE,WAAU;8CAAyC,KAAK,KAAK;;;;;;8CAChE,8OAAC;oCAAE,WAAU;8CAAmC,KAAK,GAAG;;;;;;;;;;;;sCAE1D,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAS,IAAM,WAAW,KAAK,GAAG;gCAAG,SAAQ;0CAAc;;;;;;;;;;;;mBAhBhE,KAAK,GAAG;;;;;YAsBnB;;;;;;;AAIR","debugId":null}}]
}