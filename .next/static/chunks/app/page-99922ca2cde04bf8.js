(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,l)=>{"use strict";l.d(t,{$:()=>r});var a=l(5155);let r=e=>{let{className:t="",variant:l="default",children:r,...s}=e;return(0,a.jsx)("button",{className:"".concat("font-semibold px-4 py-2 rounded-xl shadow-sm transition-colors"," ").concat({default:"bg-blue-600 hover:bg-blue-700 text-white",destructive:"bg-red-600 hover:bg-red-700 text-white"}[l]," ").concat(t),...s,children:r})}},5532:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>x});var a=l(5155),r=l(2115);let s=e=>{let{className:t,...l}=e;return(0,a.jsx)("input",{className:"border border-gray-300 rounded-xl px-4 py-2 w-full text-base focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(t),...l})};var n=l(285),i=l(6695);let o=async e=>fetch("https://api.allorigins.win/raw?url=".concat(encodeURIComponent(e)));async function c(e){try{let t=await o(e),l=await t.text(),a=new DOMParser().parseFromString(l,"text/html").querySelector('link[type="application/rss+xml"], link[type="application/atom+xml"]');if(a&&a.getAttribute("href")){let t=a.getAttribute("href");return new URL(t,e).toString()}return null}catch(e){return console.error("Failed to resolve feed URL:",e),null}}async function u(e){try{var t;let l=await o(e),a=await l.text(),r=new DOMParser().parseFromString(a,"application/xml"),s=(null===(t=r.querySelector("channel > title"))||void 0===t?void 0:t.textContent)||"Untitled Feed",n=[];return r.querySelectorAll("item").forEach(e=>{var t,l,a;let r=(null===(t=e.querySelector("title"))||void 0===t?void 0:t.textContent)||"(No title)",s=(null===(l=e.querySelector("link"))||void 0===l?void 0:l.textContent)||"",i=(null===(a=e.querySelector("pubDate"))||void 0===a?void 0:a.textContent)||"";n.push({title:r,link:s,pubDate:i})}),{title:s,items:n}}catch(e){return console.error("Failed to fetch or parse RSS:",e),null}}let d=[{title:"Paul Graham's Essays",url:"http://www.aaronsw.com/2002/feeds/pgessays.rss"},{title:"Steve Yegge's Blog",url:"https://steve-yegge.blogspot.com/feeds/posts/default"},{title:"Julia Evans",url:"https://jvns.ca/atom.xml"},{title:"Overreacted (Dan Abramov)",url:"https://overreacted.io/rss.xml"},{title:"Guido van Rossum",url:"https://gvanrossum.github.io/feed.xml"}];async function h(e){let{pipeline:t,env:a}=await Promise.all([l.e(811),l.e(138),l.e(31),l.e(911),l.e(279)]).then(l.bind(l,7228));a.backends.onnx="wasm",a.allowLocalModels=!1,a.useBrowserCache=!0;let r=await t("feature-extraction","Xenova/all-MiniLM-L6-v2"),s=(await r(e))[0][0];return(await Promise.all(d.map(async e=>{let t=function(e,t){let l=e.reduce((e,l,a)=>e+l*t[a],0);return l/(Math.sqrt(e.reduce((e,t)=>e+t*t,0))*Math.sqrt(t.reduce((e,t)=>e+t*t,0)))}(s,(await r(e.title))[0][0]);return{...e,score:t}}))).sort((e,t)=>t.score-e.score).slice(0,5)}function x(){let[e,t]=(0,r.useState)(""),[l,o]=(0,r.useState)([]),[d,x]=(0,r.useState)(""),[m,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{let e=function(){let e=localStorage.getItem("feeds");return e?JSON.parse(e):[]}();o((await Promise.all(e.map(async e=>{let t=await u(e.url);return(null==t?void 0:t.items)||[]}))).flat())})()},[]);let p=async()=>{let t=await c(e);if(t){let e=await u(t);e&&(!function(e){let t=localStorage.getItem("feeds"),l=t?JSON.parse(t):[];if(!l.find(t=>t.url===e.url)){let t=[...l,e];localStorage.setItem("feeds",JSON.stringify(t))}}({title:e.title,url:t}),o(t=>[...t,...e.items]))}},f=async()=>{g(await h(d))};return(0,a.jsxs)("main",{className:"p-6 space-y-6 max-w-3xl mx-auto bg-gray-900 text-gray-100 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"FeedReader"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(s,{placeholder:"Enter site URL or RSS feed",value:e,onChange:e=>t(e.target.value),className:"bg-gray-800 text-white placeholder-gray-400"}),(0,a.jsx)(n.$,{onClick:p,className:"bg-blue-600 hover:bg-blue-700",children:"Add Feed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(s,{placeholder:"Enter a topic you're interested in",value:d,onChange:e=>x(e.target.value),className:"bg-gray-800 text-white placeholder-gray-400"}),(0,a.jsx)(n.$,{onClick:f,className:"bg-blue-600 hover:bg-blue-700",children:"Suggest Feeds"}),(0,a.jsx)("div",{children:m.map(e=>(0,a.jsx)(i.Z,{className:"mt-2 bg-gray-800 text-white",children:(0,a.jsxs)(i.W,{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.url})]})},e.url))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Articles"}),(0,a.jsx)("div",{className:"grid gap-4",children:l.map((e,t)=>(0,a.jsx)(i.Z,{className:"bg-gray-800 text-white",children:(0,a.jsxs)(i.W,{children:[(0,a.jsx)("a",{href:e.link,className:"text-lg font-medium underline text-blue-400",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.pubDate})]})},t))})]})]})}},6695:(e,t,l)=>{"use strict";l.d(t,{W:()=>s,Z:()=>r});var a=l(5155);l(2115);let r=e=>{let{className:t,children:l,...r}=e;return(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-2xl shadow p-4 ".concat(t),...r,children:l})},s=e=>{let{className:t,children:l,...r}=e;return(0,a.jsx)("div",{className:"space-y-1 ".concat(t),...r,children:l})}},9375:(e,t,l)=>{Promise.resolve().then(l.bind(l,5532))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9375)),_N_E=e.O()}]);