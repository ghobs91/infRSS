(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>r});var a=s(5155);let r=e=>{let{className:t="",variant:s="default",children:r,...l}=e;return(0,a.jsx)("button",{className:"".concat("font-semibold px-4 py-2 rounded-xl shadow-sm transition-colors"," ").concat({default:"bg-blue-600 hover:bg-blue-700 text-white",destructive:"bg-red-600 hover:bg-red-700 text-white"}[s]," ").concat(t),...l,children:r})}},3184:(e,t,s)=>{"use strict";async function a(e){try{let t=await l(e),s=await t.text(),a=new DOMParser().parseFromString(s,"text/html").querySelector('link[type="application/rss+xml"], link[rel="alternate"][type="application/rss+xml"]');if(a&&a.getAttribute("href")){let t=a.getAttribute("href");return new URL(t,e).toString()}return null}catch(e){return console.error("Failed to resolve feed URL:",e),null}}async function r(e){try{var t;let s=await l(e),a=await s.text(),r=new DOMParser().parseFromString(a,"application/xml"),n=(null===(t=r.querySelector("channel > title"))||void 0===t?void 0:t.textContent)||"Untitled Feed",i=[];return r.querySelectorAll("item").forEach(e=>{var t,s,a;let r=(null===(t=e.querySelector("title"))||void 0===t?void 0:t.textContent)||"(No title)",l=(null===(s=e.querySelector("link"))||void 0===s?void 0:s.textContent)||"",n=(null===(a=e.querySelector("pubDate"))||void 0===a?void 0:a.textContent)||"",c=e.querySelector("media\\:content, enclosure"),o=(null==c?void 0:c.getAttribute("url"))||void 0,d=l?new URL(l).hostname.replace("www.",""):"";i.push({title:r,link:l,pubDate:n,thumbnail:o,sourceDomain:d})}),{title:n,items:i}}catch(e){return console.error("Failed to fetch or parse RSS:",e),null}}s.d(t,{HY:()=>i,k4:()=>n,ky:()=>c,nf:()=>r,xE:()=>a});let l=async e=>fetch("https://api.allorigins.win/raw?url=".concat(encodeURIComponent(e)));function n(e){let t=localStorage.getItem("feeds"),s=t?JSON.parse(t):[];if(!s.find(t=>t.url===e.url)){let t=[...s,e];localStorage.setItem("feeds",JSON.stringify(t))}}function i(){let e=localStorage.getItem("feeds");return e?JSON.parse(e):[]}function c(e){let t=localStorage.getItem("feeds"),s=(t?JSON.parse(t):[]).filter(t=>t.url!==e);localStorage.setItem("feeds",JSON.stringify(s))}},5891:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2115);let l=e=>{let{className:t,...s}=e;return(0,a.jsx)("input",{className:"border border-gray-300 rounded-xl px-4 py-2 w-full text-base focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(t),...s})};var n=s(285),i=s(6695),c=s(3184);async function o(e,t){try{let s=await fetch("/api/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e,feeds:t})});if(!s.ok)throw Error("Failed to fetch suggestions");return await s.json()}catch(e){return console.error("suggestFeedsWithWorker error:",e),[]}}function d(){let[e,t]=(0,r.useState)(""),[s,d]=(0,r.useState)([]),[u,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(""),[g,f]=(0,r.useState)([]),[p,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{m(!0);let e=(0,c.HY)();d((await Promise.all(e.map(async e=>{let t=await (0,c.nf)(e.url);return(null==t?void 0:t.items)||[]}))).flat()),m(!1)})()},[]);let N=async()=>{m(!0);let t=await (0,c.xE)(e);if(t){let e=await (0,c.nf)(t);e&&((0,c.k4)({title:e.title,url:t}),d(t=>[...t,...e.items]))}m(!1)},b=async()=>{y(!0),f(await o(x,[])),y(!1)};return(0,a.jsxs)("main",{className:"space-y-8",children:[(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Add Feed"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(l,{placeholder:"Enter site URL or RSS feed",value:e,onChange:e=>t(e.target.value),className:"flex-1 border-gray-300"}),(0,a.jsx)(n.$,{onClick:N,children:"Add Feed"})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Suggest Feeds"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(l,{placeholder:"Enter a topic you're interested in",value:x,onChange:e=>h(e.target.value),className:"flex-1 border-gray-300"}),(0,a.jsx)(n.$,{onClick:b,children:"Suggest"})]}),p&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"h-3 w-3 rounded-full bg-blue-500 animate-pulse"}),"Suggesting feeds…"]}),(0,a.jsx)("div",{className:"grid gap-3",children:g.map(e=>(0,a.jsx)(i.Z,{className:"border border-gray-800 shadow-sm",children:(0,a.jsxs)(i.W,{className:"p-4",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.url})]})},e.url))})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Articles"}),u&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"h-3 w-3 rounded-full bg-blue-500 animate-pulse"}),"Loading articles…"]}),(0,a.jsx)("div",{className:"grid gap-4",children:u?Array.from({length:3}).map((e,t)=>(0,a.jsx)(i.Z,{className:"border border-gray-800 shadow-sm animate-pulse",children:(0,a.jsx)(i.W,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})]})})},t)):s.map((e,t)=>(0,a.jsx)(i.Z,{className:"border border-gray-800 shadow-sm",children:(0,a.jsx)(i.W,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("img",{src:e.thumbnail||"/fallback-thumbnail.png",alt:"thumbnail",className:"w-20 h-20 object-cover rounded border"}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsx)("a",{href:e.link,className:"text-lg font-medium text-blue-600 hover:underline",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.pubDate}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("img",{src:"https://www.google.com/s2/favicons?sz=16&domain_url=".concat(e.sourceDomain),className:"w-4 h-4",alt:"favicon",onError:e=>{e.currentTarget.src="/favicon.ico"}}),e.sourceDomain]})]})]})})},t))})]})]})}},6695:(e,t,s)=>{"use strict";s.d(t,{W:()=>l,Z:()=>r});var a=s(5155);s(2115);let r=e=>{let{className:t,children:s,...r}=e;return(0,a.jsx)("div",{className:" border border-gray-800 rounded-2xl shadow p-4 ".concat(t),...r,children:s})},l=e=>{let{className:t,children:s,...r}=e;return(0,a.jsx)("div",{className:"space-y-1 ".concat(t),...r,children:s})}},9375:(e,t,s)=>{Promise.resolve().then(s.bind(s,5891))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9375)),_N_E=e.O()}]);